{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="profile-container">
        <h2 class="text-center">โ๏ธ ุชุนุฏูู ุงูููู ุงูุดุฎุตู</h2>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show custom-alert" role="alert">
                        {{ message }}
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('main.update_profile') }}" id="profileForm" class="custom-form">
            {{ form.hidden_tag() }}

            <!-- ๐น ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ -->
            <h3>๐ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</h3>

            <div class="form-group">
                <label>๐ ุชุงุฑูุฎ ุงููููุงุฏ</label>
                <input type="date" name="date_of_birth" class="form-control" value="{{ form.date_of_birth.data or '' }}">
            </div>

            <div class="form-group">
                <label>๐ฅ ุงูุฌูุณ</label>
                <select name="gender" class="form-control">
                    <option value="male" {% if form.gender.data == 'male' %}selected{% endif %}>ุฐูุฑ</option>
                    <option value="female" {% if form.gender.data == 'female' %}selected{% endif %}>ุฃูุซู</option>
                </select>
            </div>

            <hr>

            <!-- ๐น ุงูุฎูููุฉ ุงูุชุนููููุฉ -->
            <h3>๐ ุงูุฎูููุฉ ุงูุชุนููููุฉ</h3>

            <div class="form-group">
                <label>๐ ุฃุนูู ุดูุงุฏุฉ ุชุนููููุฉ</label>
                <select name="highest_education" class="form-control">
                    <option value="high_school">ุซุงููู</option>
                    <option value="bachelor">ุจูุงููุฑููุณ</option>
                    <option value="master">ูุงุฌุณุชูุฑ</option>
                    <option value="phd">ุฏูุชูุฑุงู</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ซ ุงุณู ุงูุฌุงูุนุฉ</label>
                <input type="text" name="university_name" class="form-control" value="{{ form.university_name.data or '' }}">
            </div>

            <div class="form-group">
                <label>๐ ุณูุฉ ุงูุชุฎุฑุฌ</label>
                <select name="graduation_year" class="form-control">
                    {% for year in range(2000, 2031) %}
                        <option value="{{ year }}" {% if form.graduation_year.data == year %}selected{% endif %}>{{ year }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ฌ ุงูุชุฎุตุต ุงูุฃูุงุฏููู</label>
                <input type="text" name="field_of_study" class="form-control" value="{{ form.field_of_study.data or '' }}">
            </div>

            <hr>

            <!-- ๐น ุงูุฎุจุฑุฉ ุงูููููุฉ -->
            <h3>๐ผ ุงูุฎุจุฑุฉ ุงูููููุฉ</h3>

            <div class="form-group">
                <label>๐ ุนุฏุฏ ุณููุงุช ุงูุฎุจุฑุฉ</label>
                <select name="experience_years" class="form-control">
                    {% for i in range(0, 31) %}
                        <option value="{{ i }}" {% if form.experience_years.data == i %}selected{% endif %}>{{ i }} ุณูุฉ</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ข ุงููุธุงุฆู ุงูุณุงุจูุฉ</label>
                <textarea name="previous_jobs" class="form-control">{{ form.previous_jobs.data or '' }}</textarea>
            </div>

            <div class="form-group">
                <label>๐ญ ุงููุฌุงู ุงูุตูุงุนู</label>
                <select name="industry" class="form-control">
                    <option value="">-- ุงุฎุชุฑ ูุฌุงูุงู --</option>
                    <option value="IT">ุชูููุฉ ุงููุนูููุงุช</option>
                    <option value="Finance">ุงููุงููุฉ</option>
                    <option value="Healthcare">ุงูุฑุนุงูุฉ ุงูุตุญูุฉ</option>
                    <option value="Education">ุงูุชุนููู</option>
                    <option value="Engineering">ุงูููุฏุณุฉ</option>
                    <option value="Other">ุฃุฎุฑู</option>
                </select>
            </div>

            <hr>

            <!-- ๐น ุงูููุงุฑุงุช -->
            <h3>๐ก ุงูููุงุฑุงุช</h3>

            <div class="form-group">
                <label for="skills">๐ผ ุงูููุงุฑุงุช ุงูุนุงูุฉ</label>
                <select name="skills[]" multiple class="form-control" id="skillsSelect">
                    <option value="ุงูููุงุฏุฉ">ุงูููุงุฏุฉ</option>
                    <option value="ุงูุชูุงุตู">ุงูุชูุงุตู</option>
                    <option value="ุฅุฏุงุฑุฉ ุงูููุช">ุฅุฏุงุฑุฉ ุงูููุช</option>
                    <option value="ุญู ุงููุดููุงุช">ุญู ุงููุดููุงุช</option>
                    <option value="ุงูุชูููุฑ ุงูููุฏู">ุงูุชูููุฑ ุงูููุฏู</option>
                    <option value="ุงูุนูู ุงูุฌูุงุนู">ุงูุนูู ุงูุฌูุงุนู</option>
                    <option value="Other">ุฃุฎุฑู</option>
                </select>
            
                <!-- ุญูู ูุธูุฑ ููุท ุนูุฏ ุงุฎุชูุงุฑ "ุฃุฎุฑู" -->
                <input type="text" name="skills[]" class="form-control mt-2" id="otherSkillInput" placeholder="ุงูุชุจ ููุงุฑุฉ ุฃุฎุฑู" style="display: none;">
            </div>
            
            

            <div class="form-group">
                <label for="technicalSkillsSelect">๐ง ุงูููุงุฑุงุช ุงูุชูููุฉ</label>
                <select name="technical_skills[]" id="technicalSkillsSelect" multiple class="form-control">
                    <option value="Python">Python</option>
                    <option value="JavaScript">JavaScript</option>
                    <option value="SQL">SQL</option>
                    <option value="HTML/CSS">HTML/CSS</option>
                    <option value="Django">Django</option>
                    <option value="Flask">Flask</option>
                    <option value="React">React</option>
                    <option value="Git">Git</option>
                    <option value="Other">ุฃุฎุฑู</option>
                </select>
            
                <input type="text" name="other_technical_skill" id="otherTechnicalSkillInput" placeholder="ุงูุชุจ ุงูููุงุฑุฉ ุงูุชูููุฉ ุงูุฃุฎุฑู" class="form-control mt-2" style="display: none;">
            </div>
            
            

            <div class="form-group">
                <label for="softSkillsSelect">๐ฃ๏ธ ุงูููุงุฑุงุช ุงูุดุฎุตูุฉ</label>
                <select name="soft_skills[]" id="softSkillsSelect" multiple class="form-control">
                    <option value="ุงููุฑููุฉ">ุงููุฑููุฉ</option>
                    <option value="ุงูุฅุจุฏุงุน">ุงูุฅุจุฏุงุน</option>
                    <option value="ุงูุงูุถุจุงุท ุงูุฐุงุชู">ุงูุงูุถุจุงุท ุงูุฐุงุชู</option>
                    <option value="ุงูุชุนุงุทู">ุงูุชุนุงุทู</option>
                    <option value="ุงูุซูุฉ ุจุงูููุณ">ุงูุซูุฉ ุจุงูููุณ</option>
                    <option value="Other">ุฃุฎุฑู</option>
                </select>
            
                <input type="text" name="other_soft_skill" id="otherSoftSkillInput" placeholder="ุงูุชุจ ุงูููุงุฑุฉ ุงูุดุฎุตูุฉ ุงูุฃุฎุฑู" class="form-control mt-2" style="display: none;">
            </div>
            
            

            <hr>

            <!-- ๐น ุงูุชูุถููุงุช -->
            <h3>๐ ุชูุถููุงุช ุงูุชูุธูู</h3>

            <div class="form-group">
                <label>๐ ุงููููุน ุงูููุถู ููุนูู</label>
                <select name="preferred_location" class="form-control">
                    <option value="riyadh">ุงูุฑูุงุถ</option>
                    <option value="jeddah">ุฌุฏุฉ</option>
                    <option value="dammam">ุงูุฏูุงู</option>
                    <option value="abha">ุฃุจูุง</option>
                    <option value="remote">ุนู ุจูุนุฏ</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ฐ ุงูุฑุงุชุจ ุงููุชููุน</label>
                <select name="preferred_salary" class="form-control">
                    <option value="3000-5000">3000 - 5000</option>
                    <option value="5000-8000">5000 - 8000</option>
                    <option value="8000-12000">8000 - 12000</option>
                    <option value="12000+">ุฃูุซุฑ ูู 12000</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ข ููุน ุงูุนูู</label>
                <select name="job_type" class="form-control">
                    <option value="full-time">ุฏูุงู ูุงูู</option>
                    <option value="part-time">ุฏูุงู ุฌุฒุฆู</option>
                    <option value="remote">ุนู ุจูุนุฏ</option>
                    <option value="freelance">ุนูู ุญุฑ</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ ูุณุชุนุฏ ููุงูุชูุงูุ</label>
                <select name="willing_to_relocate" class="form-control">
                    <option value="yes">ูุนู</option>
                    <option value="no">ูุง</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ ูุชู ููููู ุงูุจุฏุกุ</label>
                <input type="date" name="available_start_date" class="form-control" value="{{ form.available_start_date.data or '' }}">
            </div>

            <hr>

            <!-- ๐น ุงููุบุงุช -->
            <h3>๐ ุงููุบุงุช</h3>

            <div class="form-group">
                <label>๐ฃ๏ธ ุนุฏุฏ ุงููุบุงุช</label>
                <select name="languages" class="form-control">
                    <option value="1">ูุบุฉ ูุงุญุฏุฉ</option>
                    <option value="2">ูุบุชูู</option>
                    <option value="3">3 ูุบุงุช</option>
                    <option value="4+">ุฃูุซุฑ ูู 4</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ฏ ูุณุชูู ุงููุบุฉ</label>
                <select name="language_proficiency" class="form-control">
                    <option value="beginner">ูุจุชุฏุฆ</option>
                    <option value="intermediate">ูุชูุณุท</option>
                    <option value="advanced">ูุชูุฏู</option>
                </select>
            </div>

            <hr>

            <button type="submit" class="btn btn-success btn-block custom-btn">๐พ ุญูุธ ุงูุชุบููุฑุงุช</button>
        </form>
    </div>
</div>
</form>
</div>

<script>
    function setupOtherInput(selectId, inputId) {
        const select = document.getElementById(selectId);
        const input = document.getElementById(inputId);

        select.addEventListener("change", function () {
            const selected = Array.from(select.selectedOptions).map(option => option.value);
            if (selected.includes("Other")) {
                input.style.display = "block";
            } else {
                input.style.display = "none";
                input.value = "";
            }
        });
    }

    document.addEventListener("DOMContentLoaded", function () {
        setupOtherInput("skillsSelect", "otherSkillInput");
        setupOtherInput("technicalSkillsSelect", "otherTechnicalSkillInput");
        setupOtherInput("softSkillsSelect", "otherSoftSkillInput");
    });
</script>

{% endblock %}
