{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="profile-container">
        <h2 class="text-center">โ๏ธ ุชุนุฏูู ุงูููู ุงูุดุฎุตู</h2>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show custom-alert" role="alert">
                        {{ message }}
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('main.update_profile') }}" id="profileForm" class="custom-form">
            {{ form.hidden_tag() }}

            <!-- ๐น ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ -->
            <h3>๐ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ</h3>
            <div class="form-group">
                <label>๐ ุชุงุฑูุฎ ุงููููุงุฏ</label>
                <input type="date" name="date_of_birth" class="form-control" value="{{ form.date_of_birth.data }}">
            </div>

            <div class="form-group">
                <label>๐ฅ ุงูุฌูุณ</label>
                <select name="gender" class="form-control">
                    <option value="male" {% if form.gender.data == "male" %}selected{% endif %}>ุฐูุฑ</option>
                    <option value="female" {% if form.gender.data == "female" %}selected{% endif %}>ุฃูุซู</option>
                </select>
            </div>

            <!-- ๐น ุงูุฎูููุฉ ุงูุชุนููููุฉ -->
            <hr>
            <h3>๐ ุงูุฎูููุฉ ุงูุชุนููููุฉ</h3>
            <div class="form-group">
                <label>๐ ุฃุนูู ุดูุงุฏุฉ ุชุนููููุฉ</label>
                <select name="highest_education" class="form-control">
                    <option value="high_school" {% if form.highest_education.data == "high_school" %}selected{% endif %}>ุซุงููู</option>
                    <option value="bachelor" {% if form.highest_education.data == "bachelor" %}selected{% endif %}>ุจูุงููุฑููุณ</option>
                    <option value="master" {% if form.highest_education.data == "master" %}selected{% endif %}>ูุงุฌุณุชูุฑ</option>
                    <option value="phd" {% if form.highest_education.data == "phd" %}selected{% endif %}>ุฏูุชูุฑุงู</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ซ ุงุณู ุงูุฌุงูุนุฉ</label>
                <input type="text" name="university_name" class="form-control" value="{{ form.university_name.data or '' }}">
            </div>

            <div class="form-group">
                <label>๐ ุณูุฉ ุงูุชุฎุฑุฌ</label>
                <select name="graduation_year" class="form-control">
                    {% for year in range(2000, 2031) %}
                        <option value="{{ year }}" {% if form.graduation_year.data == year|string %}selected{% endif %}>{{ year }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ ุงูุชุฎุตุต ุงูุฃูุงุฏููู</label>
                <input type="text" name="field_of_study" class="form-control" value="{{ form.field_of_study.data or '' }}">
            </div>

            <!-- ๐น ุงูุฎุจุฑุฉ ุงูููููุฉ -->
            <hr>
            <h3>๐ผ ุงูุฎุจุฑุฉ ุงูููููุฉ</h3>
            <div class="form-group">
                <label>๐ ุนุฏุฏ ุณููุงุช ุงูุฎุจุฑุฉ</label>
                <select name="experience_years" class="form-control">
                    {% for i in ["0", "1-2", "3-5", "6+"] %}
                        <option value="{{ i }}" {% if form.experience_years.data == i %}selected{% endif %}>{{ i }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ข ุงููุธุงุฆู ุงูุณุงุจูุฉ</label>
                <textarea name="previous_jobs" class="form-control">{{ form.previous_jobs.data or '' }}</textarea>
            </div>

            <div class="form-group">
                <label>๐ญ ุงููุฌุงู ุงูุตูุงุนู</label>
                <select name="industry" class="form-control">
                    {% set industries = ["IT", "Engineering", "Finance", "Marketing", "Healthcare", "Other"] %}
                    <option value="">-- ุงุฎุชุฑ ูุฌุงูุงู --</option>
                    {% for ind in industries %}
                        <option value="{{ ind }}" {% if form.industry.data == ind %}selected{% endif %}>{{ ind }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ ุงูุดูุงุฏุงุช ุงูููููุฉ</label>
                <textarea name="certifications" class="form-control">{{ form.certifications.data or '' }}</textarea>
            </div>

            <!-- ๐น ุงูููุงุฑุงุช -->
            <hr>
            <h3>๐ก ุงูููุงุฑุงุช</h3>

            <div class="form-group">
                <label>๐ผ ุงูููุงุฑุงุช</label>
                <textarea name="skills" class="form-control">{{ form.skills.data or '' }}</textarea>
            </div>

            <div class="form-group">
                <label>๐ง ุงูููุงุฑุงุช ุงูุชูููุฉ</label>
                <textarea name="technical_skills" class="form-control">{{ form.technical_skills.data or '' }}</textarea>
            </div>

            <div class="form-group">
                <label>๐ฃ๏ธ ุงูููุงุฑุงุช ุงูุดุฎุตูุฉ</label>
                <textarea name="soft_skills" class="form-control">{{ form.soft_skills.data or '' }}</textarea>
            </div>

            <!-- ๐น ุชูุถููุงุช ุงูุชูุธูู -->
            <hr>
            <h3>๐ ุชูุถููุงุช ุงูุชูุธูู</h3>

            <div class="form-group">
                <label>๐ ุงููููุน ุงูููุถู</label>
                <select name="preferred_location" class="form-control">
                    {% for loc in ["riyadh", "jeddah", "dammam", "abha", "other"] %}
                        <option value="{{ loc }}" {% if form.preferred_location.data == loc %}selected{% endif %}>{{ loc }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ฐ ุงูุฑุงุชุจ ุงููุชููุน</label>
                {% set salary_options = ["3000-5000", "5000-8000", "8000-12000", "12000+"] %}
                <select name="preferred_salary" class="form-control">
                    {% for option in salary_options %}
                        <option value="{{ option }}" {% if form.preferred_salary.data == option %}selected{% endif %}>{{ option }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ข ููุน ุงูุนูู ุงูููุถู</label>
                <select name="job_type" class="form-control">
                    {% for jt in ["full-time", "part-time", "remote", "freelance"] %}
                        <option value="{{ jt }}" {% if form.job_type.data == jt %}selected{% endif %}>{{ jt }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ ุงููุงุจููุฉ ููุงูุชูุงู</label>
                <select name="willing_to_relocate" class="form-control">
                    <option value="yes" {% if form.willing_to_relocate.data == "yes" %}selected{% endif %}>ูุนู</option>
                    <option value="no" {% if form.willing_to_relocate.data == "no" %}selected{% endif %}>ูุง</option>
                </select>
            </div>

            <div class="form-group">
                <label>๐ ุชุงุฑูุฎ ุจุฏุก ุงูุนูู ุงููุชููุน</label>
                <input type="date" name="available_start_date" class="form-control" value="{{ form.available_start_date.data }}">
            </div>

            <!-- ๐น ุงููุบุงุช -->
            <hr>
            <h3>๐ ุงููุบุงุช</h3>
            <div class="form-group">
                <label>๐ฃ๏ธ ุนุฏุฏ ุงููุบุงุช</label>
                <select name="languages" class="form-control">
                    {% for count in ["1", "2", "3", "4+"] %}
                        <option value="{{ count }}" {% if form.languages.data == count %}selected{% endif %}>{{ count }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>๐ฏ ูุณุชูู ุงููุบุฉ</label>
                <select name="language_proficiency" class="form-control">
                    {% for lvl in ["beginner", "intermediate", "advanced"] %}
                        <option value="{{ lvl }}" {% if form.language_proficiency.data == lvl %}selected{% endif %}>{{ lvl }}</option>
                    {% endfor %}
                </select>
            </div>

            <hr>
            <button type="submit" class="btn btn-success btn-block custom-btn">๐พ ุญูุธ ุงูุชุบููุฑุงุช</button>
        </form>
    </div>
</div>
{% endblock %}