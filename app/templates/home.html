{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">ğŸ’¼ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©</h1>

    <!-- Ø²Ø± "Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ©" ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„ (Employer) -->
    {% if current_user.is_authenticated and current_user.role == "Employer" %}
        <div class="text-center my-4">
            <a href="{{ url_for('main.add_job') }}" class="btn btn-primary">â• Ø¥Ø¶Ø§ÙØ© ÙˆØ¸ÙŠÙØ©</a>
        </div>
    {% endif %}

    {% if jobs %}
        <div class="row justify-content-center">
            {% for job in jobs %}
                <div class="col-md-5 col-lg-4 mx-2 d-flex align-items-stretch"> <!-- ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ†Ø§Ø³Ù‚ -->
                    <div class="card job-card shadow-sm border-0 w-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title text-primary">ğŸ“Œ {{ job.title }}</h5>
                            <p class="card-text flex-grow-1">{{ job.description }}</p>
                            <p class="card-text"><strong>ğŸ¢ Ø§Ù„Ø´Ø±ÙƒØ©:</strong> {{ job.company }}</p>
                            <p class="card-text"><strong>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±:</strong> {{ job.posted_date.strftime('%Y-%m-%d') }}</p>

                            <div class="mt-auto text-center">
                                <!-- Ø²Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ù„Ø¨Ø§Ø­Ø« Ø¹Ù† Ø¹Ù…Ù„ -->
                                {% if current_user.is_authenticated and current_user.role == 'JobSeeker' %}
                                    <a href="#" class="btn btn-success w-100 mt-auto">ğŸ“© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙØ©</a>
                                {% endif %}

                                <!-- Ø£Ø²Ø±Ø§Ø± ØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù Ù„ØµØ§Ø­Ø¨ Ø§Ù„ÙˆØ¸ÙŠÙØ© ÙÙ‚Ø· -->
                                {% if current_user.is_authenticated and job.employer_id == current_user.id %}
                                    <div class="d-flex justify-content-between mt-2">
                                        <a href="{{ url_for('main.edit_job', job_id=job.id) }}" class="btn btn-warning flex-fill mx-1">âœï¸ ØªØ¹Ø¯ÙŠÙ„</a>
                                        <a href="{{ url_for('main.delete_job', job_id=job.id) }}" class="btn btn-danger flex-fill mx-1" 
                                           onclick="return confirm('âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ©ØŸ');">
                                           ğŸ—‘ï¸ Ø­Ø°Ù
                                        </a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÙŠÙ†Ø´Ø¦ ØµÙ Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ ÙƒÙ„ ÙˆØ¸ÙŠÙØªÙŠÙ† -->
                {% if loop.index % 2 == 0 %}
                    </div><div class="row justify-content-center">
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info text-center mt-4" role="alert">
            âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§.
        </div>
    {% endif %}
</div>
{% endblock %}

<!-- Ø²Ø± ÙØªØ­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
<div class="menu-button" onclick="openSidebar()">â˜°</div>

<!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <span class="close-button" onclick="closeSidebar()">Ã—</span>
        <h3>Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
    </div>
    <ul class="sidebar-menu">
        <li><a href="#">ğŸ‘¤ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a></li>
        <li><a href="#">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
        <li><a href="#">ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</a></li>
        <li><a href="#">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a></li>
    </ul>
</div>

<!-- JavaScript Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
<script>
function openSidebar() {
    document.getElementById("sidebar").classList.add("active");
}

function closeSidebar() {
    document.getElementById("sidebar").classList.remove("active");
}
</script>
